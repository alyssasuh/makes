<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- META -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="uisual" content="Made with Uisual (uisual.com)">
    <meta name="author" content="#">
    <meta name="description" content="#">
    <meta name="referrer" content="unsafe-url">
    <meta name="robots" content="index, follow">
    <!-- SPEED -->
    <!-- <link rel="preconnect" href="https://res.cloudinary.com">
    <link rel="dns-prefetch" href="https://res.cloudinary.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com"> -->
    <!-- LINK -->
    <link rel="me" href="#">
    <link rel="canonical" href="#">
    <link rel="icon" type="image/png" href="favicon.png">
    <!-- PERFORMANCE -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap">
    <link href="https://fonts.googleapis.com/css2?family=Reenie+Beanie&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: { extend: { screens: { xl2: '1200px' } } }
      }
    </script>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const header = document.getElementById('siteHeader');
        const scrollRoot = document.querySelector('main');

        if (!header || !scrollRoot) return;

        // pick the band we care about: top 10rem of the viewport
        const rem = () => parseFloat(getComputedStyle(document.documentElement).fontSize);
        const probeY = () => Math.max(1, Math.round(10 * rem())); // ≈ 10rem from top

        function updateHeader() {
          // Center X so we ignore side gutters
          const x = Math.round(window.innerWidth / 2);
          const y = probeY();

          // Which element is directly behind the header band?
          const el = document.elementFromPoint(x, y);
          const slide = el ? el.closest('.second-slide, .third-slide') : null;

          header.classList.remove('header--alt', 'header--alt2');

          if (slide?.classList.contains('second-slide')) {
            header.classList.add('header--alt');
          } else if (slide?.classList.contains('third-slide')) {
            header.classList.add('header--alt2');
          }
          // else: header returns to default styling
        }

        // Update on scroll + resize + load
        const onScroll = () => requestAnimationFrame(updateHeader);
        scrollRoot.addEventListener('scroll', onScroll, { passive: true });
        window.addEventListener('resize', updateHeader);
        updateHeader();
      });
    </script>


    <link rel="preload" as="style" href="style.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Three.js for GLB animation playback -->
    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
      }
    </script>
    <!-- TITLE -->
    <title>Project Portfolio</title>
  </head>

  <header role="banner" id="siteHeader" class="fixed top-0 inset-x-0 z-[50]">
    <div class="ui-section-header">
      <div class="ui-layout-container">
        <div class="ui-section-header__layout ui-layout-flex">
          <!-- LOGO -->
          <a href="index.html" aria-label="Home" class="logo">
            <span class="viaoda-libre-regular logo-part">EUNGYO</span>
            <span class="roboto logo-part">STUDIOS</span>
          </a>
          <!-- MENU -->
          <div class="button-container">
            <div class="dropdown">
              <a href="projects/projects.html" role="link" aria-label="View Projects Page" >
                <span class="reenie-button logo-button">Projects</span>
              </a>
              <div class="dropdown-content">
                  <a href="#">Link 1</a>
                  <a href="#">Link 2</a>
                  <a href="#">Link 3</a>
              </div>
            </div>
            <a href="about/about.html" role="link" aria-label="Learn More About Me">
              <span class="reenie-button logo-button">About Me</span>
            </a>
        </div>
      </div>
    </div>
  </header>

  <body>
    <main class="h-[calc(100svh)] overflow-y-auto overflow-x-hidden snap-y scroll-smooth"
      style="scroll-snap-type: y proximity; scroll-padding-top: 100px;">
      <div class="relative">
        <div class="sticky snap-start top-0 h-screen z-0 flex flex-col main">
          <section class="ui-section-hero">
            <div class="ui-layout-container">
              <div class="ui-component-cta ui-layout-flex">
              <!-- IMAGE -->
              <img src="logo.png" loading="lazy" alt="#" class="ui-section " width="680px" height="auto" style="margin-top:10%;">
              <div class="ui-layout-column-6 ui-layout-column-center">
                <div class ="title_index">
                  <h4>Portfolio.</h4>
                </div>
                <!-- <p class="ui-text-intro">Hello! Welcome to my webpage, where I have compiled some of my work throughout the past couple years.</p> -->
                <!-- CTA -->
                  </div>
                </div>
            </div>
          </section>
        </div>

        <div class="sticky snap-start top-0 h-screen z-0 flex flex-col items-center justify-center bg-[var(--ui-color-n-p)] text-white first-slide">
          <div class= "mx-auto px-[var(--ui-layout-container)] md:px-[5rem] lg:px-0 lg:max-w-[80rem] xl2:max-w-[90rem]">
            <div class="ui-layout-container">
              <div class="ui-section-feature__layout ui-layout-grid ui-layout-grid-2-3 items-center">
                <div class="w-full h-full flex items-center justify-center">
                  <!-- Replace video with a canvas for GLB animation (non-interactive) -->
                  <canvas id="ear-model-canvas"
                          class="block"
                          style="width:100%;height:80vh;max-height:80vh;z-index:1;outline:2px dashed #fbe27e;"></canvas>
                </div>
                <!-- Add a small message that becomes visible on error or file:// -->
                <div id="ear-model-msg" class="mt-2 text-sm text-red-700 hidden">
                  <!-- populated by script -->
                </div>
                
                <!-- FEATURE -->
                <div>
                  <h2 class=" font-[var(--ui-typography-roboto)] text-[var(--ui-color-typography-heading)] mb-4">
                    MODELING THE HUMAN EAR
                  </h2>
                  <a href="Ear/ear.html" role="link">
                    <p class="ui-text-intro text-[var(--ui-color-typography-heading)] transform hover:translate-x-4 active:translate-x-6">
                    The outer ear plays a critical role in shaping how we perceive sound- but how can we model its complex acoustics in the lab? 
                    For my senior thesis, I built a multilayer physical model of the human ear designed to replicate the material and geometric properties of soft tissue, cartilage, and bone. 
                    Using acoustic testing and 3D modeling, I investigated how sound waves travel through these structures to the eardrum, helping bridge engineering design and human anatomy in hearing research.
                    <br><br>
                    read more >>
                    </p>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="sticky snap-start top-0 h-screen z-0 flex flex-col items-center justify-center bg-[#4d5051] text-white second-slide">
          <div class= "mt-32 mx-auto px-[var(--ui-layout-container)] md:px-[5rem] lg:px-0 lg:max-w-[60rem] xl2:max-w-[70rem]">
            <div class="ui-layout-container">
              <div class="ui-section-feature__layout ui-layout-grid ui-layout-grid-2-3">
                <div class="w-full h-full flex items-center justify-center">
                  <div id="carousel" class="carousel slide carousel-fade w-full" data-bs-ride="carousel">
                    <div class="carousel-inner">
                      <div class="carousel-item active" data-bs-interval="1000">
                        <img class="d-block w-full h-auto max-h-[80vh] object-contain" src="cell_images/EvosImage_40x_DAPI.jpg" alt="First slide">
                      </div>
                      <div class="carousel-item" data-bs-interval="1000">
                        <img class="d-block w-full h-auto max-h-[80vh] object-contain" src="cell_images/EvosImage_40x_GFP.jpg" alt="Second slide">
                      </div>
                      <div class="carousel-item" data-bs-interval="1000">
                        <img class="d-block w-full h-auto max-h-[80vh] object-contain" src="cell_images/EvosImage_40x_TX.jpg" alt="Third slide">
                      </div>
                      <div class="carousel-item" data-bs-interval="1000">
                        <img class="d-block w-full h-auto max-h-[80vh] object-contain" src="cell_images/EvosImage_40x.jpg" alt="Fourth slide">
                      </div>
                    </div>
                  </div>
                </div>
                <div>
                  <h2 class="font-[var(--ui-typography-roboto)] text-[var(--ui-color-typography-heading)] mb-4">CELL ENGINEERING</h2>
                  <a href="CellMorphology/cellmorphology.html" role="link">
                    <p class="ui-text-intro text-[var(--ui-color-typography-heading)] transition transform hover:translate-x-4 active:translate-x-6">
                    The scope of bioengineering can span many scales— but what happens when we focus on fabrication at the level of individual cells? 
                    Pictured on the right is an immunofluorescent image stack of cells patterned into triangles using microcontact printing. 
                    For my final project in my Cellular Engineering class, I investigated collective cell migration during gap closure...
                    <br><br>
                    read more >>
                    </p>
                  </a>
                </div>
              </div>
            </div>
            <!-- <h2>The Second slide</h2>
            <img src="scroll_main1.png"/>
            <p>Scroll Down for next slide</p> -->
          </div>
        </div>
        <div class="sticky snap-start top-0 h-screen z-0 flex flex-col items-center justify-center bg-[var(--ui-color-background-pink)] text-black">
          <div class= "mx-auto px-[var(--ui-layout-container)] md:px-[5rem] lg:px-0 lg:max-w-[60rem] xl2:max-w-[70rem]">
            <div class="ui-layout-container">
              <div class="ui-section-feature__layout ui-layout-grid ui-layout-grid-2-3 items-center">
                <div class="w-full h-full flex items-center justify-center">
                  <img
                    src="extendoarm.png"
                    alt="Scroll main"
                    class="w-full h-auto max-h-[80vh] object-contain"
                  />
                </div>
                
                <!-- FEATURE -->
                <div>
                  <h2 class="font-[var(--ui-typography-roboto)] text-[var(--ui-color-background-heading)] mb-4">
                    CO-CONTRACTION EXTENDO ARM
                    
                  </h2>
                  <a href="CellMorphology/cellmorphology.html" role="link">
                    <p class="ui-text-intro text-[var(--ui-color-background-heading)] transform hover:translate-x-4 active:translate-x-6">
                      There is increasing interest in human augmentation, but does the human brain have the capacity to control an additional limb? 
                      As a final project for my Biomechanics class, our team designed a lightweight, forearm-mounted extendable arm. 
                      The device is intuitively controlled via muscle co-contraction, allowing for seamless use without compromising existing degrees of freedom...
                      <br><br>
                      read more >>
                    </p>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Three.js GLB animation player (non-interactive) -->
    <script type="module">
      import * as THREE from 'three';
      import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

      const canvas = document.getElementById('ear-model-canvas');
      const msgEl = document.getElementById('ear-model-msg');

      // Inform user when running from file:// which prevents GLB loading
      if (location.protocol === 'file:' && msgEl) {
        msgEl.textContent = '3D model won’t load when opened from file:// due to browser security. Start a local server (e.g., python3 -m http.server 8000) and open http://localhost:8000/index.html';
        msgEl.classList.remove('hidden');
      }

      if (!canvas) {
        console.error('[EarGLB] Canvas not found.');
      } else {
        const updateCanvasSize = () => {
          const parent = canvas.parentElement;
          const width = parent.clientWidth;
          const height = Math.min(window.innerHeight * 0.6, width);
          canvas.width = width;
          canvas.height = height;
          canvas.style.width = width + 'px';
          canvas.style.height = height + 'px';
          return { width, height };
        };
        const { width, height } = updateCanvasSize();

        const scene = new THREE.Scene();
        scene.background = null;
        const camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);
        camera.position.set(1, 4, 50);
        
        // Update camera near plane for better close-up rendering
        camera.near = 0.01;
        camera.updateProjectionMatrix();

        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        renderer.setSize(width, height);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.outputColorSpace = THREE.SRGBColorSpace;
        renderer.setClearColor(0x000000, 0); // fully transparent canvas background

        // Adjust lighting here:
        // Ambient light provides overall illumination (color, intensity)
        scene.add(new THREE.AmbientLight(0xffffff, 0.5)); // Reduced intensity for softer ambient

        // Main directional light (like sunlight)
        const d1 = new THREE.DirectionalLight(0xffffff, 2.0); // Increased intensity
        d1.position.set(10, 15, 10); // Moved higher and to the right
        scene.add(d1);

        // Fill light (softer, from opposite side)
        const d2 = new THREE.DirectionalLight(0xffffdd, 0.5); // Warmer tone, lower intensity
        d2.position.set(-8, 3, -8);
        scene.add(d2);

        // Optional: Add rim light for edge definition
        const d3 = new THREE.DirectionalLight(0xaaccff, 0.6); // Cool blue rim light
        d3.position.set(0, -5, -10);
        scene.add(d3);

        let mixer = null;
        const clock = new THREE.Clock();

        // Use literal filename with space (adjust if actual file differs)
        const MODEL_URL = 'JoinedEar4_opaque_noVertexColors.glb';

        fetch(MODEL_URL, { method: 'HEAD' })
          .then(r => console.log('[EarGLB] HEAD status:', r.status))
          .catch(e => console.warn('[EarGLB] HEAD failed:', e));

        const loader = new GLTFLoader();
        loader.load(
          MODEL_URL,
          gltf => {
            const model = gltf.scene;
            
            // Traverse and fix materials for proper color rendering
            model.traverse((child) => {
              if (child.isMesh && child.material) {
                const mat = child.material;
                
                // Ensure colors are visible
                mat.side = THREE.DoubleSide; // Render both sides
                
                // Fix color space for textures
                if (mat.map) {
                  mat.map.colorSpace = THREE.SRGBColorSpace;
                }
                
                // Ensure vertex colors are used if present
                if (child.geometry.attributes.color) {
                  mat.vertexColors = true;
                }
                
                // Force material to use flat shading if no normals
                if (!child.geometry.attributes.normal) {
                  mat.flatShading = true;
                }
                
                mat.needsUpdate = true;
              }
            });

            // Fix transparent materials depth write
            scene.traverse(o => {
              if (o.isMesh && o.material && o.material.transparent) {
                o.material.depthWrite = false;
                // o.material.side = THREE.DoubleSide; // optional
              }
            });

            const box = new THREE.Box3().setFromObject(model);
            const center = box.getCenter(new THREE.Vector3());
            const size = box.getSize(new THREE.Vector3());
            const maxDim = Math.max(size.x, size.y, size.z);
            const scale = 30 / maxDim;
            model.scale.setScalar(scale);
            model.position.sub(center.multiplyScalar(scale));
            scene.add(model);

            if (gltf.animations.length) {
              mixer = new THREE.AnimationMixer(model);
              gltf.animations.forEach(clip => mixer.clipAction(clip).setLoop(THREE.LoopRepeat, Infinity).play());
              console.log('[EarGLB] Playing', gltf.animations.length, 'clip(s)');
            } else {
              console.log('[EarGLB] No animations; applying slow rotation.');
              model.userData.autoRotate = true;
            }
          },
          xhr => {
            if (xhr.total) {
              console.log(`[EarGLB] Load ${(xhr.loaded / xhr.total * 100).toFixed(1)}%`);
            } else {
              console.log('[EarGLB] Loaded bytes:', xhr.loaded);
            }
          },
          err => {
            console.error('[EarGLB] Load error:', err);
            if (msgEl) {
              msgEl.textContent = 'Failed to load model (check console). If you opened this file directly, run a local server and reload.';
              msgEl.classList.remove('hidden');
            }
          }
        );

        function animate() {
          requestAnimationFrame(animate);
          const delta = clock.getDelta();
          if (mixer) mixer.update(delta);
          // Fallback rotation if no animation
          scene.traverse(obj => {
            if (obj.userData.autoRotate) obj.rotation.y += 0.003;
          });
          renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
          const { width, height } = updateCanvasSize();
          camera.aspect = width / height;
          camera.updateProjectionMatrix();
          renderer.setSize(width, height);
        });
      }
    </script>
  </body>
</html>


